# order-service

## 도메인 모델링

처음 도메인 모델링을 할 때는 상품 -> 주문 -> 결제 모듈을 두어서 여러 개의 상품이 하나의 주문을 갖고, 주문과 결제는 1대1 관계로 만들 생각이었다.

### 결제 모델의 필요성
하지만 계속된 고민 끝에 우리는 결제 모델이 불필요하다고 생각하게 되었고, 결제 모델이 내포하고 있었던 의미를 주문 모델이 포함하도록 수정했다.

### 상품과 주문의 관계
그리고 또 하나 수정된 것은 상품과 주문이 N대1 관계를 가진다는 것이었는데, 이는 여러 상품에 대한 주문을 한 번에 할 수 있기 때문에 그렇게 생각했었다. 하지만 각각의 상품은 각각의 주문 상태(배송 중, 배송 완료, 환불 중 등)를 가질텐데, 주문 모델을 하나만 두면 이 각각의 상태를 표현할 수 없어진다. 그래서 상품과 주문은 1대1 관계를 가지도록 수정했고, 여러 상품을 한번에 주문하는 것은 세부적인 내용(주문자, 배송지 정보 등)이 같은 주문 데이터를 여러개 생성하는 것이라고 생각하기로 했다.

### 다시 한 번, 결제 모델의 필요성

위에서 결제 모델은 필요없다고 결정한 우리였지만, 정기 결제의 경우 주문과 결제가 항상 동시에 일어나는 것이 아니기 때문에 결국 결제 모델은 따로 둘 필요가 있어 보였다. 단 결제 모델을 실제로 구현할 때는 연속성을 가지는 ENTITY로 선언할 것이 아니라 행위를 나타내는 SERVICE로 구현해보려고 한다. 사실 결제라는 것은 "사용자의 지갑에서 돈을 뺀다"라는 행위, 그 이상도 이하도 아니라는 생각이 들었다.